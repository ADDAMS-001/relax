
GMTLIB=-L/usr/local/gmt/lib -lgmt
CDFLIB=-L/usr/local/lib -lnetcdf
GCCLIB=-L/sio_raid2/gcc/gcc-4.1.0/gcc -lgcc
SCSLIB=-L/usr/lib -lscs_mp

FFLAGS=-i-static -O3 -zero -warn all
CFLAGS=-I/sw/include
OPENMP=-openmp 
LINK=-Wl,--allow-multiple-definition

FC=ifort 
F77=ifort 
CC=cc 

OBJ = fourier.o green.o elastic3d.o friction3d.o viscoelastic3d.o writegrd4.2.o export.o getdata.o relax.o

%.o : %.c
	$(CC) $(CFLAGS) -c $^

%.o : %.f
	$(F77) $(OPENMP) $(FFLAGS) $(SCSLIB) -c $^

%.o : %.f90 
	$(FC) $(SCSLIB) $(OPENMP) $(FFLAGS) -fpp -c $^

relax: $(OBJ)
	$(FC) $(LINK) $(FFLAGS) $(OPENMP) $^ $(GMTLIB) $(CDFLIB) $(GCCLIB) $(SCSLIB) -o $@

include clean.mk

