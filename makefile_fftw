
LIBPATH=-L/sw/lib
INCPATH=-I/sw/include

LIBS=-lgmt -lnetcdf -lfftw3f_threads -lfftw3f -lm -lpthread 

CC=cc
F77=ifort
FC=ifort -openmp

FFLAGS=-cpp $(INCPATH) -zero -warn all
F77FLAGS=-zero 
CFLAGS=-I/sw/include 

OBJ = include.f90 ctfft.o fourier.o green.o elastic3d.o friction3d.o viscoelastic3d.o writegrd4.2.o export.o getdata.o relax.o

%.o : %.c
	$(CC) $(CFLAGS) -c $^

%.o : %.f
	$(F77) $(F77FLAGS) -c $^

%.o : %.f90
	$(FC) $(FFLAGS) -c $^

relax: $(OBJ)
	$(FC) $(FFLAGS) $(CDF) $(GMT) -o $@ $^ $(LIBPATH) $(LIBS)

include clean.mk
